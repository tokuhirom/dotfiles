#!/usr/bin/env python3
"""epoch - epoch 秒と日時の相互変換"""

import sys
import time
from datetime import datetime, timezone, timedelta

JST = timezone(timedelta(hours=9))


def print_time(t):
    """UTC と JST を併記して出力"""
    print(f"UTC: {t.isoformat()}")
    print(f"JST: {t.astimezone(JST).isoformat()}")


def main():
    if len(sys.argv) <= 1:
        print(int(time.time()))
        return

    input_str = sys.argv[1]
    length = len(input_str)

    if length == 8 and input_str.isdigit():
        # YYYYMMDD
        try:
            t = datetime.strptime(input_str, "%Y%m%d").replace(tzinfo=timezone.utc)
            print(int(t.timestamp()))
        except ValueError:
            print("Invalid date format.")
    elif length == 12 and input_str.isdigit():
        # YYYYMMDDhhmm
        try:
            t = datetime.strptime(input_str, "%Y%m%d%H%M").replace(tzinfo=timezone.utc)
            print(int(t.timestamp()))
        except ValueError:
            print("Invalid date-time format.")
    elif input_str.isdigit() and length <= 10:
        # Epoch seconds
        t = datetime.fromtimestamp(int(input_str), tz=timezone.utc)
        print_time(t)
    elif input_str.isdigit() and length <= 13:
        # Epoch milliseconds
        t = datetime.fromtimestamp(int(input_str) / 1000, tz=timezone.utc)
        print_time(t)
    else:
        print("Invalid input format.")


if __name__ == "__main__":
    main()
